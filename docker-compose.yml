version: '3.7'

volumes:
  follow-data: {}


networks:
  demo:
    name: demo
    driver: bridge
  node_net:
    ipam:
      driver: default
      config:
        - subnet: 172.28.0.0/16

services:
  mongofollow:
    image: 'mongo:4.2.6-bionic'
    container_name: mongofollow
    ports:
      - '27017:27017'
    networks:
      - demo
    volumes:
      - follow-data:/data/db
    restart: on-failure  


  follow-microservice:
    image: followimg
    container_name: follow-microservice
    depends_on:
      - mongofollow
    environment:
      - PORT=8089
    networks:
      - demo
    ports:
      - '8089:8089'
    volumes:
      - follow-data:/data/db:rw

  
